# Common default values for temporal.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

temporal:
  enabled: true

  fullnameOverride: temporal

  serviceAccount:
    create: true

  server:
    replicaCount: 1

    # Resource configuration for Temporal server components
    # Requests are minimal for development, limits prevent runaway usage
    resources:
      requests:
        cpu: "50m"
        memory: "128Mi"
      limits:
        cpu: "500m"
        memory: "512Mi"

    config:
      persistence: {}

    metrics:
      serviceMonitor:
        enabled: true

        additionalLabels:
          release: prometheus-operator

    frontend:
      metrics:
        serviceMonitor:
          enabled: true

    history:
      metrics:
        serviceMonitor:
          enabled: true

    matching:
      metrics:
        serviceMonitor:
          enabled: true

    worker:
      metrics:
        serviceMonitor:
          enabled: true

  web:
    # Resource configuration for Temporal Web UI
    resources:
      requests:
        cpu: "25m"
        memory: "64Mi"
      limits:
        cpu: "200m"
        memory: "256Mi"

    ingress:
      enabled: true
      annotations:
        cert-manager.io/cluster-issuer: cert-manager-production
        nginx.ingress.kubernetes.io/enable-owasp-core-rules: "true"
        nginx.ingress.kubernetes.io/enable-opentelemetry: "true"

      hosts:
        - "temporal.shortlink.best"

      tls:
        - secretName: temporal-tls
          hosts:
            - "temporal.shortlink.best"

  elasticsearch:
    enabled: true
    replicas: 1

    # Resource configuration for Elasticsearch (visibility store)
    resources:
      requests:
        cpu: "100m"
        memory: "512Mi"
      limits:
        cpu: "1000m"
        memory: "2Gi"

  cassandra:
    enabled: true

    persistence:
      storageClass: local-path
      size: 1Gi

    config:
      cluster_size: 1

    # Resource configuration for Cassandra (workflow persistence)
    resources:
      requests:
        cpu: "100m"
        memory: "512Mi"
      limits:
        cpu: "1000m"
        memory: "2Gi"

    exporter:
      enabled: false

  prometheus:
    enabled: false

  grafana:
    enabled: false
