# 1. Init Courier Emulation Service

Date: 2025-01-30

## Status

Accepted

## Context

To test the Delivery Boundary, we need a way to simulate courier behavior:

- Route navigation
- Location updates
- Order acceptance and fulfillment

Without real couriers, it's impossible to fully test:

- Order dispatching (DispatchService)
- Real-time delivery tracking
- Integration with Geolocation Service
- End-to-end delivery scenarios

## Decision

Create **Courier Emulation Service** — a service for simulating couriers in a test environment.

### Technology Stack

- **Language**: Go (consistency with feed, email-subscription and other Go services)
- **API**: gRPC for emulation management
- **Routing**: OSRM (Open Source Routing Machine) for realistic route generation
- **Data**: Berlin OSM as test region

### Key Components

1. **Route Generator** — route generation via OSRM
2. **Courier Simulator** — courier movement simulation along routes
3. **Event Emitter** — event publishing (location updates, status changes)
4. **Scenario Runner** — test scenario execution

### Integrations

- **Delivery Service** — receiving assignments, confirming delivery
- **Geolocation Service** — updating courier coordinates

## Consequences

### Positive

- Full E2E testing of Delivery Boundary without real couriers
- Reproducible test scenarios
- Realistic routes based on OSM data
- Load testing capability (simulating hundreds of couriers)

### Negative

- Additional service to maintain
- Dependency on OSRM for route generation
- Need for periodic OSM data updates
