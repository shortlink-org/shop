# Cosmo Router Configuration
# https://cosmo-docs.wundergraph.com/router/configuration

version: "1"

# Router execution config (generated by `wgc router compose`)
execution_config:
  file:
    path: "./router-config.json"

# Server configuration
graph:
  sign_key: ""  # Optional: JWT signing key for graph token validation

listen_addr: "0.0.0.0:9991"

# Logging configuration
log_level: "info"

# CORS configuration
cors:
  allow_origins:
    - "http://localhost:3000"
    - "https://shop.shortlink.best"
  allow_methods:
    - "GET"
    - "POST"
    - "OPTIONS"
  allow_headers:
    - "Content-Type"
    - "Authorization"
    - "X-Request-ID"
  allow_credentials: true

# GraphQL configuration
graphql:
  # Enable GraphQL introspection
  introspection: true
  # Enable GraphQL Playground
  playground: true
  # GraphQL endpoint path
  path: "/graphql"

# Telemetry configuration
telemetry:
  # Prometheus metrics
  metrics:
    prometheus:
      enabled: true
      path: "/metrics"
      listen_addr: "0.0.0.0:8088"

# Health check endpoints
health_check:
  enabled: true
  path: "/health"

# Ready check endpoints
readiness_check:
  enabled: true
  path: "/ready"

# Traffic shaping
traffic_shaping:
  router:
    # Maximum request body size
    max_request_body_size: "5MB"

# Subgraph configuration overrides
subgraphs:
  carts:
    routing_url: "${CARTS_SUBGRAPH_URL:http://localhost:8100/graphql}"
  admin:
    routing_url: "${ADMIN_SUBGRAPH_URL:http://localhost:8101/graphql}"
  countries:
    routing_url: "${COUNTRIES_SUBGRAPH_URL:https://countries.trevorblades.com/}"
